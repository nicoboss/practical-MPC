include:
  - project: chr-share/devops/gitlab-cicd
    ref: v4-stable
    file: cryptolab/auto.cd.yml

variables:
  STACK_NAME: PracticalMPC
  VH_FRONTEND: mpc.nico.re

stages:
  - test
  - build
  - deploy

build:
  extends: .custom-job
  stage: build
  script:
    - docker-compose build

test:
  extends: .custom-job
  stage: test
  script:
    - docker-compose up --abort-on-container-exit
    - docker-compose down
